<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ユーザー新規登録</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
</head>

<body>
    <div class="container">
        <div class="background"></div> <!-- 背景用の要素 -->
        <div class="board">
            <p>新規登録</p>
            <form action="/registerDB" method="post">
                <div class="form-row">
                    <label for="username">ユーザー名：</label>
                    <input type="text" id="username" name="username" required value="{{ username or '' }}">
                </div>

                <div class="form-row">
                    <label for="emailAddress">メールアドレス：</label>
                    <input type="email" id="emailAddress" name="emailAddress" required value="{{ emailAddress or '' }}">
                </div>
                {% if errors and errors.get('emailAddress') %}
                <div class="error-message">
                    {{ errors['emailAddress'] }}
                </div>
                {% endif %}

                <div class="form-row">
                    <label for="password">パスワード：</label>
                    <input type="password" id="password" name="password" required>
                </div>
                {% if errors and errors.get('password') %}
                <div class="error-message">
                    {{ errors['password'] }}
                </div>
                {% endif %}

                <div class="form-row">
                    <label for="confirmPassword">パスワード（確認）：</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                </div>
                {% if errors and errors.get('confirmPassword') %}
                <div class="error-message">
                    {{ errors['confirmPassword'] }}
                </div>
                {% endif %}

                <div class="form-row">
                    <label>性別：</label>
                    <div id="gender-buttons">
                        <button type="button" onclick="selectGender('male', this)" class="{{ 'selected' if gender == 'male' else '' }}">男</button>
                        <button type="button" onclick="selectGender('female', this)" class="{{ 'selected' if gender == 'female' else '' }}">女</button>
                    </div>
                    <input type="hidden" name="gender" id="gender" value="{{ gender or '' }}" required>
                </div>

                <div class="form-row">
                    <label for="gradeSetting">学年：</label>
                    <select id="gradeSetting" name="gradeSetting" required>
                        <option value="" disabled {% if not gradeSetting %}selected{% endif %}>選択してください</option>
                        {% for i in range(1, 7) %}
                            <option value="{{ i }}" {% if gradeSetting == i|string %}selected{% endif %}>{{ i }}年生</option>
                        {% endfor %}
                    </select>
                </div>

                <button type="submit">登録</button>
            </form>

            <button type="button" class="btn-back" onclick="history.back()">◀ 戻る</button>

        </div>
    </div>

    <script>
        function selectGender(value, button) {
            document.getElementById('gender').value = value;
            const buttons = document.querySelectorAll('#gender-buttons button');
            buttons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
        }
    </script>

</body>

</html>
