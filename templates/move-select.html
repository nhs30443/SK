<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>行動選択</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="move-select.css">
</head>
<body>
    <div class="container">
        <!-- 背景 -->
        <div class="background"></div>

        <!-- ボタンコンテナ -->
        <div class="button-container">
            <button class="movement-button attack-button" onclick="selectAttack()">攻撃</button>
            <button class="movement-button item-button" onclick="openItemModal()">アイテム</button>
        </div>
    </div>

    <!-- アイテム選択モーダル -->
    <div class="item-modal" id="itemModal">
        <div class="item-window">
            <button class="close-button" onclick="closeItemModal()">×</button>
            <div class="item-header">アイテム選択</div>
            <div class="item-grid">
                <!-- アイテムスロット（直接HTML記述） -->
                <div class="item-slot" onclick="selectItem('ポーション')">
                    <div class="item-icon">🧪</div>
                    <div class="item-name">ポーション</div>
                </div>
                <div class="item-slot" onclick="selectItem('エリクサー')">
                    <div class="item-icon">✨</div>
                    <div class="item-name">エリクサー</div>
                </div>
                <div class="item-slot" onclick="selectItem('煙玉')">
                    <div class="item-icon">💨</div>
                    <div class="item-name">煙玉</div>
                </div>
                <div class="item-slot" onclick="selectItem('投げナイフ')">
                    <div class="item-icon">🗡️</div>
                    <div class="item-name">投げナイフ</div>
                </div>
                <div class="item-slot" onclick="selectItem('爆弾')">
                    <div class="item-icon">💣</div>
                    <div class="item-name">爆弾</div>
                </div>
                <div class="item-slot empty">
                    <div class="item-icon">❌</div>
                    <div class="item-name">空き</div>
                </div>
            </div>
            <button class="cancel-button" onclick="closeItemModal()">キャンセル</button>
        </div>
    </div>

    <script>
        function selectAttack() {
            // 攻撃が選択された時の処理
            console.log('攻撃が選択されました');
            // ここでDB連携や次の画面への遷移処理を実装
        }

        function openItemModal() {
            document.getElementById('itemModal').classList.add('show');
        }

        function closeItemModal() {
            document.getElementById('itemModal').classList.remove('show');
        }

        function selectItem(itemName) {
            // 空きスロットの場合は何もしない
            if (itemName === '空き') return;

            console.log(itemName + 'が選択されました');
            // ここでDB連携やアイテム使用処理を実装

            // モーダルを閉じる
            document.getElementById('itemModal').classList.remove('show');
        }

        // モーダル外クリックで閉じる
        document.getElementById('itemModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeItemModal();
            }
        });
    </script>
</body>
</html>