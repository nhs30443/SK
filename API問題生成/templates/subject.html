{% extends "base.html" %}

{% block title %}{{ subject_name }}—小学生学習サイト{% endblock %}

{% block content %}
<div class="navigation">
    <a href="/" class="back-btn">← トップページに戻る</a>
</div>

<div class="header">
    <h1>
        {% if subject == 'math' %}🔢 算数
        {% elif subject == 'english' %}🌍 英語
        {% elif subject == 'kanji' %}📝 漢字
        {% endif %}
    </h1>
    <p>
        {% if subject == 'math' %}計算問題にチャレンジしよう！
        {% elif subject == 'english' %}英単語の意味を覚えよう！
        {% elif subject == 'kanji' %}漢字の読み方を学ぼう！
        {% endif %}
    </p>
</div>

<!-- 学年選択セクション -->
<div class="grade-selector">
    <label for="grade-selection" class="grade-label">
        <span class="grade-icon">📚</span>
        学年を選択してください：
    </label>
    <div class="grade-buttons" id="grade-selection">
        <button class="grade-btn active" data-grade="1">
            <span class="grade-number">1</span>
            <span class="grade-text">年生</span>
        </button>
        <button class="grade-btn" data-grade="2">
            <span class="grade-number">2</span>
            <span class="grade-text">年生</span>
        </button>
        <button class="grade-btn" data-grade="3">
            <span class="grade-number">3</span>
            <span class="grade-text">年生</span>
        </button>
        <button class="grade-btn" data-grade="4">
            <span class="grade-number">4</span>
            <span class="grade-text">年生</span>
        </button>
        <button class="grade-btn" data-grade="5">
            <span class="grade-number">5</span>
            <span class="grade-text">年生</span>
        </button>
        <button class="grade-btn" data-grade="6">
            <span class="grade-number">6</span>
            <span class="grade-text">年生</span>
        </button>
    </div>
</div>

<!-- 現在の学年表示 -->
<div class="current-grade-display">
    <div class="current-grade-info">
        <span class="current-grade-icon">🎯</span>
        <span class="current-grade-text">現在の設定: </span>
        <span id="current-grade-value" class="current-grade-value">1年生</span>
    </div>

    {% if subject == 'math' %}
    <div class="grade-curriculum-info">
        <span id="curriculum-info-math" class="curriculum-text">
            1年生の算数: 1桁の足し算・引き算、10までの数
        </span>
    </div>
    {% elif subject == 'english' %}
    <div class="grade-curriculum-info">
        <span id="curriculum-info-english" class="curriculum-text">
            1年生の英語: 基本的な英単語（動物、色、数字）
        </span>
    </div>
    {% elif subject == 'kanji' %}
    <div class="grade-curriculum-info">
        <span id="curriculum-info-kanji" class="curriculum-text">
            1年生の漢字: 基本的な漢字（一、二、三、人、大、小など）
        </span>
    </div>
    {% endif %}
</div>

<div id="question-area">
    <div class="loading">
        <div class="loading-spinner"></div>
        <p>問題を読み込み中...</p>
    </div>
</div>

<div class="controls">
    <button id="new-question-btn" class="btn btn-primary">
        <span class="btn-icon">🔄</span>
        新しい問題
    </button>
    <button id="check-answer-btn" class="btn btn-success" style="display: none;">
        <span class="btn-icon">✓</span>
        答えを確認
    </button>
</div>

<div id="result-area"></div>

<!-- 学年別統計表示 -->
<div class="stats">
    <div class="stat-item">
        <span class="stat-label">正解数:</span>
        <span id="correct-count" class="stat-value">0</span>
    </div>
    <div class="stat-item">
        <span class="stat-label">問題数:</span>
        <span id="total-count" class="stat-value">0</span>
    </div>
    <div class="stat-item">
        <span class="stat-label">正解率:</span>
        <span id="accuracy-rate" class="stat-value">0%</span>
    </div>
    <div class="stat-item">
        <span class="stat-label">学年:</span>
        <span id="current-grade-stat" class="stat-value">1年生</span>
    </div>
</div>

<!-- 学年別説明セクション -->
<div class="grade-explanation">
    <div class="explanation-content">
        <h3>
            <span class="explanation-icon">💡</span>
            学年について
        </h3>
        {% if subject == 'math' %}
        <div class="grade-details">
            <div class="grade-detail math-grade-1" data-grade="1" style="display: block;">
                <strong>1年生の算数</strong>：10までの数の理解、1桁の足し算・引き算を学習します。
            </div>
            <div class="grade-detail math-grade-2" data-grade="2">
                <strong>2年生の算数</strong>：2桁の計算、かけ算の基礎（九九）を学習します。
            </div>
            <div class="grade-detail math-grade-3" data-grade="3">
                <strong>3年生の算数</strong>：3桁の計算、九九の完成、わり算の基礎を学習します。
            </div>
            <div class="grade-detail math-grade-4" data-grade="4">
                <strong>4年生の算数</strong>：4桁の計算、小数の基礎、分数の計算を学習します。
            </div>
            <div class="grade-detail math-grade-5" data-grade="5">
                <strong>5年生の算数</strong>：小数・分数の計算、割合、体積を学習します。
            </div>
            <div class="grade-detail math-grade-6" data-grade="6">
                <strong>6年生の算数</strong>：分数の四則計算、比と比の値、速さを学習します。
            </div>
        </div>
        {% elif subject == 'english' %}
        <div class="grade-details">
            <div class="grade-detail english-grade-1" data-grade="1" style="display: block;">
                <strong>1年生の英語</strong>：基本的な英単語（動物、色、数字）を学習します。
            </div>
            <div class="grade-detail english-grade-2" data-grade="2">
                <strong>2年生の英語</strong>：身の回りの物、形容詞の基本を学習します。
            </div>
            <div class="grade-detail english-grade-3" data-grade="3">
                <strong>3年生の英語</strong>：学校生活、感情表現の英単語を学習します。
            </div>
            <div class="grade-detail english-grade-4" data-grade="4">
                <strong>4年生の英語</strong>：家族、行事に関する英単語を学習します。
            </div>
            <div class="grade-detail english-grade-5" data-grade="5">
                <strong>5年生の英語</strong>：天気、趣味に関する英単語を学習します。
            </div>
            <div class="grade-detail english-grade-6" data-grade="6">
                <strong>6年生の英語</strong>：自然、環境に関する英単語を学習します。
            </div>
        </div>
        {% elif subject == 'kanji' %}
        <div class="grade-details">
            <div class="grade-detail kanji-grade-1" data-grade="1" style="display: block;">
                <strong>1年生の漢字</strong>：基本的な漢字80字（一、二、三、人、大、小など）を学習します。
            </div>
            <div class="grade-detail kanji-grade-2" data-grade="2">
                <strong>2年生の漢字</strong>：160字（東、西、南、北、町、村など）を学習します。
            </div>
            <div class="grade-detail kanji-grade-3" data-grade="3">
                <strong>3年生の漢字</strong>：200字（県、市、島、橋など）を学習します。
            </div>
            <div class="grade-detail kanji-grade-4" data-grade="4">
                <strong>4年生の漢字</strong>：200字（都道府県、歴史、科学など）を学習します。
            </div>
            <div class="grade-detail kanji-grade-5" data-grade="5">
                <strong>5年生の漢字</strong>：185字（政治、経済、社会、文化など）を学習します。
            </div>
            <div class="grade-detail kanji-grade-6" data-grade="6">
                <strong>6年生の漢字</strong>：181字（憲法、民主主義、国際など）を学習します。
            </div>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // 科目情報をJavaScriptに渡す
    const SUBJECT = '{{ subject }}';

    // 学年別カリキュラム情報
    const CURRICULUM_INFO = {
        'math': {
            1: '1年生の算数: 1桁の足し算・引き算、10までの数',
            2: '2年生の算数: 2桁の計算、かけ算の基礎（九九）',
            3: '3年生の算数: 3桁の計算、九九の完成、わり算の基礎',
            4: '4年生の算数: 4桁の計算、小数の基礎、分数の計算',
            5: '5年生の算数: 小数・分数の計算、割合、体積',
            6: '6年生の算数: 分数の四則計算、比と比の値、速さ'
        },
        'english': {
            1: '1年生の英語: 基本的な英単語（動物、色、数字）',
            2: '2年生の英語: 身の回りの物、形容詞の基本',
            3: '3年生の英語: 学校生活、感情表現の英単語',
            4: '4年生の英語: 家族、行事に関する英単語',
            5: '5年生の英語: 天気、趣味に関する英単語',
            6: '6年生の英語: 自然、環境に関する英単語'
        },
        'kanji': {
            1: '1年生の漢字: 基本的な漢字80字（一、二、三、人、大、小など）',
            2: '2年生の漢字: 160字（東、西、南、北、町、村など）',
            3: '3年生の漢字: 200字（県、市、島、橋など）',
            4: '4年生の漢字: 200字（都道府県、歴史、科学など）',
            5: '5年生の漢字: 185字（政治、経済、社会、文化など）',
            6: '6年生の漢字: 181字（憲法、民主主義、国際など）'
        }
    };
    
    // ページが読み込まれたら問題アプリを初期化
    document.addEventListener('DOMContentLoaded', () => {
        new QuestionApp(SUBJECT);
    });
</script>
{% endblock %}